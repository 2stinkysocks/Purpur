From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Villagers654 <110007851+Villagers654@users.noreply.github.com>
Date: Mon, 22 Jul 2024 21:03:09 -0400
Subject: [PATCH] Fire EntityTeleportHinderedEvent when attempting to teleport
 a player with passengers


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index e970ecee6cbcf2c1597e1afb1cbaa39d85183ce6..48ad261eec1b74fad5a4fc1516b75fd2aaecd528 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -1472,6 +1472,7 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
         }
 
         if (entity.isVehicle() && !ignorePassengers) { // Paper - Teleport API
+            if (!new org.purpurmc.purpur.event.entity.EntityTeleportHinderedEvent(entity.getBukkitEntity(), org.purpurmc.purpur.event.entity.EntityTeleportHinderedEvent.Reason.IS_VEHICLE, cause).callEvent()) // Purpur start
             return false;
         }
 
